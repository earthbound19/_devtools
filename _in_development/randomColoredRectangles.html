<!DOCTYPE html>
<html>
<head>
<title>Random Colored Rectangle Generator</title>
<script src="reimg.js"></script>
</head>

<body>
<p>Hello! Here's some randomly generated rectangles. Code horked and adapted by RAH.

<script>
//TO DO: Allow for random rectangle size/position/color ranges that are more controlled?

function init() {
    var body = document.getElementsByTagName("body")[0];
    var canvas = document.createElement("canvas");
	canvas.id="artCanvas"
    canvas.width = (window.innerWidth * .8);
    canvas.height = (window.innerHeight * .8);
    var context = canvas.getContext("2d");

			// context.global1lpha = 0.3;
	context.global1lpha = 64;

	// Generate and fill N random rectangles.
	for (var i = 0; i < 6000; i++) {
	var colour = '#' + Math.round(0xffffff * Math.random()).toString(16);
	context.fillStyle = colour;
	upperLeftX = Math.floor((Math.random() * canvas.width) + 1)
	upperLeftY = Math.floor((Math.random() * canvas.height) + 1)
			// DEPRECATED approach which resulted in smaller rectangles clumping at the edges and larger rectangles clumping at the center:
			// rectWidth = Math.floor((Math.random() * (canvas.width - upperLeftX)) / 4);
	rectWidth = Math.floor((Math.random() * canvas.width) / 5)
			// DEPRECATED for same prior listed reason:
			// rectHeight = Math.floor((Math.random() * (canvas.height - upperLeftY)) / 4);
	rectHeight = Math.floor((Math.random() * canvas.height) / 5)
	context.fillRect(upperLeftX, upperLeftY, rectWidth, rectHeight);
	}

	// Write generated rectangles to the canvas.
    body.appendChild(canvas);
}
init();
</script>

<script>
var png = ReImg.fromCanvas(document.getElementById('artCanvas')).toPng();
</script>



</body>
</html>